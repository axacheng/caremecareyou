<!DOCTYPE html>
{% extends "loginbase.html" %}

{% block content %}
<div id="content" class="span8 section-body">
  <div id="section-body" class="tabbable">
    <ul class="nav nav-tabs">
      {% if my_disease_name_nav_menu %}
        {% for disease_name in my_disease_name_nav_menu %}
          {% if forloop.first %}        
            <li class="active">
              <a href="#{{ disease_name }}" data-toggle="tab" data-original-title=""> {{ disease_name }} 的記錄 <i class="icon-bar-chart"></i> 
              </a>
            </li>
          {% else %}
            <li class="">
              <a href="#{{ disease_name }}" data-toggle="tab" data-original-title=""> {{ disease_name }} 的記錄 <i class="icon-bar-chart"></i> 
              </a>
            </li>
          {% endif %}
        {% endfor %}
      {% endif %}
    </ul>

<!--

$('div.tab-pane').attr('class','tab-pane');
$('div.tab-pane:first').attr('class', 'tab-pane active');
-->
    <div class="tab-content">
<<<<<<< HEAD
      {% if my_disease_name_nav_menu %}
        {% for disease_name in my_disease_name_nav_menu %}
            <div class="tab-pane active" id="{{ disease_name }}">
              <div class="row-fluid">
                <!--圖表一：用藥明細-->
                  <script type="text/javascript">
                    google.load('visualization', '1', {packages: ['annotatedtimeline']});
                    google.setOnLoadCallback(drawChartMedicine);

                    function drawChartMedicine() {
                        var url_medicine = "http://localhost:8080/{{ username }}/{{ disease_name }}/chart/medicinetakenjson/{{ forloop.counter0 }}";
                        var query_medicine = new google.visualization.Query(url_medicine);
                        query_medicine.send(callback_draw_timeline_medicine);

                        function callback_draw_timeline_medicine(response) {
                            if (response.isError()) {
                                alert("Error in query_medicine: " + response.getMessage());
                                return;
                            };
                            var data_medicine = response.getDataTable();
                            var chart_medicine = new google.visualization.AnnotatedTimeLine(document.getElementById('timeline1{{ forloop.counter0 }}'));
                                chart_medicine.draw(data_medicine, {displayAnnotations: true,
                                  thickness: 3, fill:5,
                                  dateFormat: 'yyyy-M-dd',
                                  annotationsWidth: 10});
                        };
                    };

                   </script> 
                <div id="graph-medicine">
                  <span class="label label-success"><i class="icon-beaker icon-white"></i> 處方用藥 </span>
                </div>
                {{ disease_name }}
                <div id="timeline1{{ forloop.counter0 }}" style='height:240px; width:800px;'></div> 


                <!--圖表二：副作用-->
                <div id="graph-sideeffect">
                  <span class="label label-warning"><i class="icon-retweet icon-white"></i> 副作用 </span>
                </div>
                <!--圖表三：檢查記錄-->
                <div id="graph-check">
                 <span class="label label-important"><i class="icon-check icon-white"></i> 檢查記錄 </span>
               </div>
                <!--圖表四：圖像記錄-->
                <div id="photo-record">
                  <span class="label label-info"><i class="icon-camera icon-white"></i> 圖像記錄 </span>
                </div>
              </div> <!-- row-fluid -->
            </div> <!-- tab pane -->
        {% endfor %}
      {% endif %}  
    </div> <!-- tab-content -->
  </div> <!-- section-body -->
</div>
<div class="span3" id="widget">
      <div id="accordion4" class="accordion">
        <div class="accordion-group">
          <div class="accordion-heading">
            <a href="#event" data-toggle="collapse" class="accordion-toggle" data-original-title="">
              <i class="icon-bookmark icon-white"></i> 
              <span class="divider-vertical"></span> 
              Earning <i class="icon-chevron-down icon-white pull-right"></i>
            </a>
=======
      <div class="tab-pane active" id="tab1"> <!--此 id 來自 for 迴圈-->
        <div class="row-fluid">
          <!--圖表一：用藥明細-->
          <div id="graph-medicine">
            <span class="label label-success"><i class="icon-beaker icon-white"></i> 處方用藥 </span><p>
            <div id="graph1">
              <img src="http://placehold.it/800x240">
            </div>
          </div><!--圖表一：用藥明細結束-->
          <hr>
          <!--圖表二：副作用-->
          <div id="graph-sideeffect">
            <span class="label label-warning"><i class="icon-retweet icon-white"></i> 副作用 </span><p>
            <div id="graph2">
              <img src="http://placehold.it/800x240">
            </div>
          </div><!--圖表二：副作用結束-->
          <hr>
          <!--圖表三：檢查記錄-->
          <div id="graph-check">
            <span class="label label-important"><i class="icon-check icon-white"></i> 檢查記錄 </span><p>
            <div id="graph3">
              <img src="http://placehold.it/800x240">
            </div>
         </div> <!--圖表三：檢查記錄結束-->
         <hr>
          <!--圖表四：圖像記錄-->
          <div id="photo-record">
            <span class="label label-info"><i class="icon-camera icon-white"></i> 圖像記錄 </span><p>
            <div class="row-fluid" id="photo_slider">
              <div id="landing_carousel" class="carousel">
                <div class="carousel-inner">
                  <!--一排四張圖，若超過四張，則再出現下一個item-->
                  <div class="item active">
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  </div> <!--第一排結束-->
                  <div class="item">
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  </div> <!--第二排結束-->
                  <div class="item">
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  
                    <a href="#"><img alt="YYYY-MM-DD; comment" src="http://placehold.it/198x150"></a>
                  </div> <!--第三排結束-->
                </div>
                <a class="carousel-controls left" href="#landing_carousel" data-slide="prev">‹</a>
                <a class="carousel-controls right" href="#landing_carousel" data-slide="next">›</a>
              </div><!--圖表四：圖像記錄結束-->
            </div>
          </div>
        </div><!--某一疾病圖表內容結束-->
      </div><!--某一疾病tab結束-->
    </div><!--所有疾病對應tab結束-->
  </div><!--section-body 結束-->
</div><!--中間針對各疾病出現圖表記錄項目結束-->
<!--右邊欄位開始-->
<div class="span4" id="widget">
  <div id="accordion4" class="accordion">
    <!-- 生理指數開始囉！ -->
    <div class="accordion-group">
      <div class="accordion-heading">
        <a href="#physi" data-toggle="collapse" class="accordion-toggle" data-original-title="">
          <i class=" icon-dashboard icon-white"></i> 
          <span class="divider-vertical"></span> 
          生理指數 <i class="icon-chevron-down icon-white pull-right"></i>
        </a>
      </div>
      <div class="accordion-body collapse in" id="physi">
        <div class="accordion-inner">
          <div class="tabbable"> 
          <!-- 生理指數標籤開始！ -->
          <ul class="nav nav-tabs">
            <li>
              <a href="#wf" data-toggle="tab" data-original-title="">體重與體脂</a>
            </li>
            <li class="active">
              <a href="#bp" data-toggle="tab" data-original-title="">血壓與脈搏</a>
            </li>
            <li>
              <a href="#temperature" data-toggle="tab" data-original-title="">體溫</a>
            </li>
          </ul><!-- 生理指數標籤結束！ -->
          <!-- 生理指數圖表內容開始！ -->
          <div class="tab-content">
            <!-- 生理指數-體重與體脂圖表！ -->
            <div class="tab-pane" id="wf" align="center">
              <div class="chart_container" id="combochart" style="position: relative; "><img src="http://placehold.it/350x300">
              </div>
            </div>
            <!-- 生理指數-體重與體脂圖表結束！ -->
            <!-- 生理指數-血壓與脈搏圖表！ -->
            <div class="tab-pane active" id="bp" align="center">
              <div class="chart_container" id="combochart" style="position: relative; "><img src="http://placehold.it/350x300">
              </div>
            </div>
            <!-- 生理指數-血壓與脈搏圖表結束！ -->
            <!-- 生理指數-體溫與生理期(如果有的話)圖表！ -->
            <div class="tab-pane" id="temperature" align="center">
              <div class="chart_container" id="combochart" style="position: relative; "><img src="http://placehold.it/350x300">
              </div>
            </div>
            <!-- 生理指數-體溫與生理期(如果有的話)圖表結束！ -->
          </div><!-- 生理指數圖表內容結束！ -->
          </div><!-- 生理指數結束！ -->
>>>>>>> 04c10435b726c9f9f6f2f1e9831ab7b95678b499
        </div>
      </div>
    </div> <!-- 生理指數結束！ -->
    <!-- 行事曆數開始囉！ -->
    <div class="accordion-group">
      <div class="accordion-heading">
        <a href="#calendar" data-toggle="collapse" class="accordion-toggle" data-original-title="">
          <i class="icon-calendar icon-white"></i> 
          <span class="divider-vertical"></span> 
          行事曆 <i class="icon-chevron-down icon-white pull-right"></i>
        </a>
      </div>
      <div class="accordion-body collapse in" id="calendar">
        <div class="accordion-inner">
          <div align="center">
            <img src="http://placehold.it/350x400">
          </div>
        </div>
      </div>
    </div><!-- 行事曆數結束！ -->
    <!-- 社交功能開始 -->
    <div class="accordion-group">
      <div class="accordion-heading">
        <a href="#latest" data-toggle="collapse" class="accordion-toggle" data-original-title="">
          <i class="icon-group icon-white"></i> 
          <span class="divider-vertical"></span> 
          與我有相同症狀的病友<i class="icon-chevron-down icon-white pull-right"></i>
        </a>
      </div>
      <div class="accordion-body collapse in" id="latest">
        <div class="accordion-inner">
          <div class="tabbable"> 
            <!--依照病症來分 -->
            <ul class="nav nav-tabs">
              <li class="active">
                <a href="#d1" data-toggle="tab" data-original-title="">{disease_name1}</a>
              </li>
              <li>
                <a href="#d2" data-toggle="tab" data-original-title="">{disease_name2}</a>
              </li>
              <li>
                <a href="#d3" data-toggle="tab" data-original-title="">{disease_name3}</a>
              </li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="d1">
                <ul class="unstyled flickr">
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                </ul>
              </div>
              <div class="tab-pane" id="d2">
                <ul class="unstyled flickr">
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                </ul>
              </div>
              <div class="tab-pane" id="d3">
                <ul class="unstyled flickr">
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                  <li><a href="#" ><img src="http://placehold.it/56x56" alt="" class="img_nofade"></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        </div>
    </div>
    <!-- 社交功能結束 -->
  </div>
</div>
<<<<<<< HEAD


    <script type="text/javascript">
      // 在 annotated timeline要畫圖時我們必須要準備好畫圖的 div DOM
      // 但由於我們用 django template system 的 forloop render, 所以會發生
      // annotated timeline 的js執行完後，但畫圖的 div DOM還沒有在頁面上產生，導致出現以下錯誤：
      // Uncaught Error: Container width is zero. Expecting a valid width. 
      // 這也是為什麼我們在 forloop中的 tab-pane都是給他active 讓 annotated timeline 可以找到
      // 畫圖的div位置後，給他畫上圖，之後在用 load() 把所有的
      // tab-pane 的active拿掉，在把第一個 tab-pane element給active ，這樣就能正確產生圖表。
      // (TODO) 需要小明大提供更好的方式來解決～
      function load(){
        $('div.tab-pane').attr('class','tab-pane');
        $('div.tab-pane:first').attr('class', 'tab-pane active');      
      }

       $(document).ready(function() {
          setTimeout("load()",2000);
       });
    </script>


=======
<!--右邊欄位結束-->
>>>>>>> 04c10435b726c9f9f6f2f1e9831ab7b95678b499
{% endblock %}