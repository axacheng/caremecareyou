<!DOCTYPE html>
<html lang="utf-8">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">@media print {  .gmnoprint {    display:none  }}@media screen {  .gmnoscreen {    display:none  }}</style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title> {% block title %} xxx - 我的紀錄 {% endblock %}</title>
    {% block scripts %}
    <script src="static/js/jquery.js"></script>
    <script src="static/js/bootstrap-modal.js"></script>
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/jquery.flot.js"></script>
    <script src="static/js/jquery.flot.resize.js"></script>
    <script src="static/js/jquery.flot.pie.js"></script>
    <script src="static/js/customcharts.js"></script>
    <script src="static/js/jquery-ui.min.js"></script>
    <script src="static/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>

<!-- 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
 -->
    <script>
        //datepicker for calendar
         $(function() {
           $( "#date_report" ).datepicker();
         });

        $(function() {
          $( "#search_disease" ).autocomplete({
              source: "/search_disease/?"
          }); //autocomplete
        });

        $(function() {
          $( "#search_medicine" ).autocomplete({
              source: "/search_medicine/?"
          }); //autocomplete
        });

        $(function() {
          function split( val ) {
            return val.split( /,\s*/ );
          }
          function extractLast( term ) {
            return split( term ).pop();
          }

          $( "#search_side_effect, #search_medicine" )
            // don't navigate away from the field on tab when selecting an item
            .bind( "keydown", function( event ) {
              if ( event.keyCode === $.ui.keyCode.TAB &&
                  $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
              }
            })
            .autocomplete({
              source: function( request, response ) {
                $.getJSON( "/search_side_effect/?", {
                  term: extractLast( request.term )
                }, response );
              },
              search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 1 ) {
                  return false;
                }
              },
              focus: function() {
                // prevent value inserted on focus
                return false;
              },
              select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
              }
            }); //end autocomplete


          $( "#search_medicine" )
            // don't navigate away from the field on tab when selecting an item
            .bind( "keydown", function( event ) {
              if ( event.keyCode === $.ui.keyCode.TAB &&
                  $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
              }
            })
            .autocomplete({
              source: function( request, response ) {
                $.getJSON( "/search_medicine/?", {
                  term: extractLast( request.term )
                }, response );
              },
              search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 1 ) {
                  return false;
                }
              },
              focus: function() {
                // prevent value inserted on focus
                return false;
              },
              select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
              }
            }); //end autocomplete




        });
    </script>
    <script type="text/javascript">
            $(document).ready(function(){
                $('.togglemenuleft').click(function(){
                    $('#menu-left').toggleClass('span1');
                    $('#menu-left').toggleClass('icons-only');
                    $('#menu-left').toggleClass('span3');
                    
                    $('#content').toggleClass('span6');
                    $('#content').toggleClass('span8');
                    
                    $(this).find('i').toggleClass('icon-circle-arrow-right');
                    $(this).find('i').toggleClass('icon-circle-arrow-left');
                    $('#menu-left').find('span').toggle();
                    $('#menu-left').find('.dropdown').toggle();
                });

                $('#menu-left a').click(function(){
                    $('#menu-left').find('a').removeClass('active');
                    $(this).addClass('active');
                });
        // tool tip
                $('a').tooltip('hide');

        //datePciker
                $("#datepicker").datepicker();
// switch style 
                $('a.style').click(function(){
                    var style = $(this).attr('href');
                    $('.links-css').attr('href','css/' + style);
                    return false;
                });
               


                $(".switcher").click(function(){
                    if($(this).find('i').hasClass('icon-circle-arrow-right'))
                    $('.theme').animate({left:'0px'},500);
                    else
                    $('.theme').animate({left:'-89'},500);

                    $(this).find('i').toggleClass('icon-circle-arrow-right');
                    $(this).find('i').toggleClass('icon-circle-arrow-left');
                });

            });
    </script>
    {% endblock %}

    <!-- jquery-ui -->
    {% block styles %}
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css">

    <!-- bootstrap css -->
    <link href="static/css/bootstrap.css" rel="stylesheet">
    <link href="static/css/style.css" rel="stylesheet">
    <link href="static/css/datepicker.css" rel="stylesheet">

    <!-- base css -->
    <link class="links-css" href="static/css/base.css" rel="stylesheet">

    <!-- home page css -->
    <link href="static/css/home-page.css" rel="stylesheet">
    
    <style type="text/css">
      body {
        padding-top: 30px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
    </style>

    <style>
    .ui-autocomplete-loading { background: white url('http://jqueryui.com/demos/autocomplete/images/ui-anim_basic_16x16.gif') right center no-repeat; }
    </style>

    <!-- responsive css -->
    <link href="static/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- media query css -->
    <link href="static/css/media-fluid.css" rel="stylesheet">

     <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
     <!--[if lt IE 9]>
     <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
     <![endif]-->

     <!-- Le fav and touch icons -->
     <link rel="shortcut icon" href="static/ico/favicon.ico">
     {% endblock %}
  </head>

  <body>

    <div id="header">
      {% block header %} {% include "loginheader.html" %} {% endblock %}
    </div> <!-- navbar -->
   <!-- only for desktop
  =============================== -->
    <div id="maincontainer" class="left-sb-fluid">
      <div id="contentwrapper">
        <div id= "leftpanel">
          {% block sidebar %}{% include "sidebar.html" %} {% endblock %}
        </div>
        <div id="content">{% block content %} {% endblock %}
        </div>
      </div>
    </div>

    {% block modal1 %}
    <div class="modal hide" id="service">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h2><font color= "#600000">請輸入你的用藥記錄：</font></h2>
      </div>
      <div class="modal-body">
        <form action="/add_report" name="add_report" id="report" method="POST" accept-charset="UTF-8">
          疾病名稱: <input id="search_disease" type="text" name="term" /> <br>
          <div class="input-append date" id="date_report" data-date="{{ today }}" data-date-format="yyyy-mm-dd">
          時間:  <input class="span2" name="report_date" size="16" type="text" value="{{ today }}" >
                <span class="add-on"><i class="icon-th"></i></span>
          </div>
          藥名: <input id="search_medicine"    type="text" name="term" /> <br>
          副作用: <input id="search_side_effect" type="text" name="term" />
          <div class="modal-footer">
            <input id="search_input" class="btn btn-primary" type="submit" value="按我新增記錄" />
            <a href="#" class="btn" data-dismiss="modal">Close</a>
          </div>
        </form> <!-- add_report end -->
      </div> <!-- modal-body end -->
    </div> <!-- modal hide end -->
    {% endblock %}
    <div class="clearfix"></div>
    <div id="footer">
      {% include 'footer.html' %} 
    </div>

    <div id="tc_container" style="display: none" data="ih"></div>
  </body>
</html>
