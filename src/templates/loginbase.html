<!DOCTYPE html>
<html lang="utf-8">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">@media print {  .gmnoprint {    display:none  }}@media screen {  .gmnoscreen {    display:none  }}</style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title> {% block title %} xxx - 我的紀錄 {% endblock %}</title>
    {% block scripts %}
    <script src="static/js/jquery.js"></script>
    <script src="static/js/bootstrap-modal.js"></script>
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/jquery.flot.js"></script>
    <script src="static/js/jquery.flot.resize.js"></script>
    <script src="static/js/jquery.flot.pie.js"></script>
    <script src="static/js/customcharts.js"></script>
    <script src="static/js/jquery-ui.min.js"></script>
    <script src="static/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="static/js/jquery.tagsinput.js"></script>
    <link rel="stylesheet" type="text/css" href="static/css/jquery.tagsinput.css" />

<!-- 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
 -->
    <script>
        //datepicker for calendar
         $(function() {
           $( "#date_report" ).datepicker();
         });

        // $(function() {
        //   $( "#search_disease" ).autocomplete({
        //       source: "/search_disease/?"
        //   }); //autocomplete
        // });

        // $(function() {
        //   $( "#search_medicine" ).autocomplete({
        //       source: "/search_medicine/?"
        //   }); //autocomplete
        // });

        $(function() {
          function split( val ) {
            return val.split( /,\s*/ );
          }
          function extractLast( term ) {
            return split( term ).pop();
          }

          $( "#search_side_effect" )
            // don't navigate away from the field on tab when selecting an item
            .bind( "keydown", function( event ) {
              if ( event.keyCode === $.ui.keyCode.TAB &&
                  $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
              }
            })
            .autocomplete({
              source: function( request, response ) {
                $.getJSON( "/search_side_effect/?", {
                  term: extractLast( request.term )
                }, response );
              },
              search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 1 ) {
                  return false;
                }
              },
              focus: function() {
                // prevent value inserted on focus
                return false;
              },
              select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
              }
            }); //end autocomplete

            // Tag input search.
            $(function(){
              $('#search_medicine').tagsInput({
                //http://localhost:8080/tagsearch/?term=Alinamin
                autocomplete_url:'/tagsearch/',
                autocomplete:{selectFirst:true,
                              width:'200px',
                              autoFill:true},
                placeholderColor : '#006666',
                defaultText: '請輸入症狀名稱...',

              });
            }); 

            $(function(){
              $('#search_disease').tagsInput({
                // autocomplete_url:'/tagsearch/',
                // autocomplete:{selectFirst:true,
                //               width:'200px',
                //               autoFill:true},
                placeholderColor : '#006666',
                defaultText: '請選擇一項您要記錄的症狀名',
                height:'200px',
                width:'500px',
              });
            });




          // $( "#search_medicine" )
          //   // don't navigate away from the field on tab when selecting an item
          //   .bind( "keydown", function( event ) {
          //     if ( event.keyCode === $.ui.keyCode.TAB &&
          //         $( this ).data( "autocomplete" ).menu.active ) {
          //       event.preventDefault();
          //     }
          //   })
          //   .autocomplete({
          //     source: function( request, response ) {
          //       $.getJSON( "/2/?", {
          //         term: extractLast( request.term )
          //       }, response );
          //     },
          //     search: function() {
          //       // custom minLength
          //       var term = extractLast( this.value );
          //       if ( term.length < 1 ) {
          //         return false;
          //       }
          //     },
          //     focus: function() {
          //       // prevent value inserted on focus
          //       return false;
          //     },
          //     select: function( event, ui ) {
          //       var terms = split( this.value );
          //       // remove the current input
          //       terms.pop();
          //       // add the selected item
          //       terms.push( ui.item.value );
          //       // add placeholder to get the comma-and-space at the end
          //       terms.push( "" );
          //       this.value = terms.join( ", " );
          //       return false;
          //     }
          //   }); //end autocomplete




        });
    </script>
    <script type="text/javascript">
            $(document).ready(function(){
                $('.togglemenuleft').click(function(){
                    $('#menu-left').toggleClass('span1');
                    $('#menu-left').toggleClass('icons-only');
                    $('#menu-left').toggleClass('span3');
                    
                    $('#content').toggleClass('span6');
                    $('#content').toggleClass('span8');
                    
                    $(this).find('i').toggleClass('icon-circle-arrow-right');
                    $(this).find('i').toggleClass('icon-circle-arrow-left');
                    $('#menu-left').find('span').toggle();
                    $('#menu-left').find('.dropdown').toggle();
                });

                $('#menu-left a').click(function(){
                    $('#menu-left').find('a').removeClass('active');
                    $(this).addClass('active');
                });
        // tool tip
                $('a').tooltip('hide');

        //datePciker
                $("#datepicker").datepicker();
// switch style 
                $('a.style').click(function(){
                    var style = $(this).attr('href');
                    $('.links-css').attr('href','css/' + style);
                    return false;
                });
               


                $(".switcher").click(function(){
                    if($(this).find('i').hasClass('icon-circle-arrow-right'))
                    $('.theme').animate({left:'0px'},500);
                    else
                    $('.theme').animate({left:'-89'},500);

                    $(this).find('i').toggleClass('icon-circle-arrow-right');
                    $(this).find('i').toggleClass('icon-circle-arrow-left');
                });

            });
    </script>
    {% endblock %}

    <!-- jquery-ui -->
    {% block styles %}
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css">

    <!-- bootstrap css -->
    <link href="static/css/bootstrap.css" rel="stylesheet">
    <link href="static/css/style.css" rel="stylesheet">
    <link href="static/css/datepicker.css" rel="stylesheet">

    <!-- base css -->
    <link class="links-css" href="static/css/base.css" rel="stylesheet">

    <!-- home page css -->
    <link href="static/css/home-page.css" rel="stylesheet">
    
    <style type="text/css">
      body {
        padding-top: 30px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
    </style>

    <style>
    .ui-autocomplete-loading { background: white url('http://jqueryui.com/demos/autocomplete/images/ui-anim_basic_16x16.gif') right center no-repeat; }
    </style>

    <!-- responsive css -->
    <link href="static/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- media query css -->
    <link href="static/css/media-fluid.css" rel="stylesheet">

     <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
     <!--[if lt IE 9]>
     <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
     <![endif]-->

     <!-- Le fav and touch icons -->
     <link rel="shortcut icon" href="static/ico/favicon.ico">
     {% endblock %}




  <script type="text/javascript">
        google.load('visualization', '1', {packages: ['annotatedtimeline']});
        google.setOnLoadCallback(drawChartMedicine);

        function drawChartMedicine() {
            var url_medicine = "http://localhost:8080/123456:[[[[[[[[[%20TEST%20]]]]]]]]:facebook/急性咽喉炎/chart/medicinetakenjson";
            //var url_medicine = "http://localhost:8080/showchartjson";
            var query_medicine = new google.visualization.Query(url_medicine);
            query_medicine.send(callback_draw_timeline_medicine);

            function callback_draw_timeline_medicine(response) {
                if (response.isError()) {
                    alert("Error in query_medicine: " + response.getMessage());
                    return;
                };
                var data_medicine = response.getDataTable();
                var chart_medicine = new google.visualization.AnnotatedTimeLine(document.getElementById('timeline1'));
                chart_medicine.draw(data_medicine, {displayAnnotations: true, thickness: 3, fill:5,
                                  dateFormat: 'yyyy-M-dd', annotationsWidth: 10});
            };
        };

    </script> 


  <script type="text/javascript">
        google.load('visualization', '1', {packages: ['annotatedtimeline']});
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            var url = "http://localhost:8080/123456:[[[[[[[[[%20TEST%20]]]]]]]]:facebook/上瞼下垂/chart/sideeffectjson";
            //var url = "http://localhost:8080/showchartjson";
            var query = new google.visualization.Query(url);
            query.send(callback_draw_timeline);

            function callback_draw_timeline(response) {
                if (response.isError()) {
                    alert("Error in query: " + response.getMessage());
                    return;
                };
                var data = response.getDataTable();
                var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('timeline2'));
                chart.draw(data, {displayAnnotations: true, thickness: 3, fill:5,
                                  dateFormat: 'yyyy-M-dd', annotationsWidth: 10,
                                  displayAnnotationsFilter:true});
            };
        };

    </script> 


  <script type="text/javascript">
        google.load('visualization', '1', {packages: ['annotatedtimeline']});
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            var url = "http://localhost:8080/123456:[[[[[[[[[%20TEST%20]]]]]]]]:facebook/上瞼下垂/chart/mindingjson";
            //var url = "http://localhost:8080/showchartjson";
            var query = new google.visualization.Query(url);
            query.send(callback_draw_timeline);

            function callback_draw_timeline(response) {
                if (response.isError()) {
                    alert("Error in query: " + response.getMessage());
                    return;
                };
                var data = response.getDataTable();
                var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('timeline3'));
                chart.draw(data, {displayAnnotations: true, thickness: 3, fill:5,
                                  dateFormat: 'yyyy-M-dd', annotationsWidth: 10,
                                  displayAnnotationsFilter:true});
            };
        };

    </script> 


  <script type="text/javascript">
        google.load('visualization', '1', {packages: ['annotatedtimeline']});
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            var url = "http://localhost:8080/123456:[[[[[[[[[%20TEST%20]]]]]]]]:facebook/高寫只/chart/examjson";
            //var url = "http://localhost:8080/showchartjson";
            var query = new google.visualization.Query(url);
            query.send(callback_draw_timeline);

            function callback_draw_timeline(response) {
                if (response.isError()) {
                    alert("Error in query: " + response.getMessage());
                    return;
                };
                var data = response.getDataTable();
                var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('timeline4'));
                chart.draw(data, {'displayAnnotations': true, 'thickness': 3, 'fill':5,
                                  'dateFormat': 'yyyy-M-dd', 'annotationsWidth': 10,
                                  'displayAnnotationsFilter':true});
            };
        };


    </script> 


  </head>

  <body>

    <div id="header">
      {% block header %} {% include "loginheader.html" %} {% endblock %}
    </div> <!-- navbar -->




              <div id="timeline1" style='height: 240px; width:800px;'>藥品服用記錄圖</div> 
              <hr>
              <div id="timeline2" style='height: 240px; width:800px;'>副作用記錄圖</div>
              <hr>
              <div id="timeline3" style='height: 240px; width:800px;'>生理指數</div>
              <hr>
              <div id="timeline4" style='height: 240px; width:800px;'>檢查記錄</div>

   <!-- only for desktop
  =============================== -->
    <div id="maincontainer" class="left-sb-fluid">
      <div id="contentwrapper">
        <div id= "leftpanel">
          {% block sidebar %}{% include "sidebar.html" %} {% endblock %}
        </div>
        <div id="content">{% block content %} {% endblock %}
        </div>
      </div>
    </div>





    {% block modal1 %}
    <div class="modal hide" id="service">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h2><font color= "#600000">請輸入你的用藥記錄：</font></h2>
      </div>
      <div class="modal-body">
        <form action="/add_exam_report" name="add_report" id="report" method="POST" accept-charset="UTF-8">
          疾病名稱: <input id="search_disease" type="text" name="term" value="{{ my_disease_name }}" /> <br>
          <div class="input-append date" id="date_report" data-date="{{ today }}" data-date-format="yyyy-mm-dd">
          時間:  <input class="span2" name="report_date" size="16" type="text" value="{{ today }}" >
                <span class="add-on"><i class="icon-th"></i></span>
          </div>
          檢查內容: <input id="exam_name" type="text" name="term" /> <br>
          檢查數值: <input id="exam_value" type="text" name="term" />
          <div class="modal-footer">
            <input id="search_input" class="btn btn-primary" type="submit" value="按我新增記錄" />
            <a href="#" class="btn" data-dismiss="modal">Close</a>
          </div>
        </form> <!-- add_report end -->

      </div> <!-- modal-body end -->
    </div> <!-- modal hide end -->
    {% endblock %}
    <div class="clearfix"></div>
    <div id="footer">
      {% include 'footer.html' %} 
    </div>

    <div id="tc_container" style="display: none" data="ih"></div>
  </body>
</html>
